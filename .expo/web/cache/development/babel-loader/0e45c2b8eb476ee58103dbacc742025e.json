{"ast":null,"code":"import e from \"react\";\nimport n from \"isoworker\";\nimport r from \"dequal\";\n\nvar t,\n    a = function a(e) {\n  return function (n) {\n    return Promise.resolve(e.fn.apply(e, n.data[0])).then(function (n) {\n      var r,\n          t = \"auto\" === e.transferable && (r = n, \"ArrayBuffer\" in self && r instanceof ArrayBuffer || \"MessagePort\" in self && r instanceof MessagePort || \"ImageBitmap\" in self && r instanceof ImageBitmap || \"OffscreenCanvas\" in self && r instanceof OffscreenCanvas) ? [n] : [];\n      postMessage([\"SUCCESS\", n], t);\n    }).catch(function (e) {\n      postMessage([\"ERROR\", e]);\n    });\n  };\n},\n    o = function o(e, r, t, _o) {\n  var i = n.createContext(_o)[0],\n      u = \"\\n    \" + function (e) {\n    return 0 === e.length ? \"\" : \"importScripts('\" + e.map(function (e) {\n      return \"\" + e;\n    }).toString() + \"')\";\n  }(r) + \";\\n    \" + i + \"\\n    onmessage=(\" + a + \")({\\n      fn: (\" + e + \"),\\n      transferable: '\" + t + \"'\\n    })\\n  \",\n      c = new Blob([u], {\n    type: \"text/javascript\"\n  });\n\n  return URL.createObjectURL(c);\n};\n\n!function (e) {\n  e.PENDING = \"PENDING\", e.SUCCESS = \"SUCCESS\", e.RUNNING = \"RUNNING\", e.ERROR = \"ERROR\", e.TIMEOUT_EXPIRED = \"TIMEOUT_EXPIRED\";\n}(t || (t = {}));\nvar i,\n    u = t;\n!function (e) {\n  e.AUTO = \"auto\", e.NONE = \"none\";\n}(i || (i = {}));\n\nvar c = {\n  timeout: void 0,\n  remoteDependencies: [],\n  autoTerminate: !0,\n  transferable: i.AUTO,\n  localDependencies: function localDependencies() {\n    return [];\n  }\n},\n    s = function s(n, t) {\n  void 0 === t && (t = c);\n  var a,\n      s,\n      l,\n      f = e.useState(u.PENDING),\n      m = f[0],\n      v = f[1],\n      d = e.useRef(),\n      R = e.useRef(!1),\n      p = e.useRef({}),\n      E = e.useRef(),\n      w = e.useCallback(function (e) {\n    R.current = e === u.RUNNING, v(e);\n  }, []),\n      C = e.useCallback(function () {\n    var e;\n    (null === (e = d.current) || void 0 === e ? void 0 : e._url) && (d.current.terminate(), URL.revokeObjectURL(d.current._url), p.current = {}, d.current = void 0, window.clearTimeout(E.current));\n  }, []),\n      N = e.useCallback(function (e) {\n    (null != t.autoTerminate ? t.autoTerminate : c.autoTerminate) && C(), w(e);\n  }, [t.autoTerminate, C, w]),\n      T = (a = function a() {\n    var e = t.remoteDependencies,\n        r = t.timeout,\n        a = void 0 === r ? c.timeout : r,\n        i = t.transferable,\n        s = t.localDependencies,\n        l = o(n, void 0 === e ? c.remoteDependencies : e, void 0 === i ? c.transferable : i, void 0 === s ? c.localDependencies : s),\n        f = new Worker(l);\n    return f._url = l, f.onmessage = function (e) {\n      var n,\n          r,\n          t,\n          a,\n          o = e.data,\n          i = o[1];\n\n      switch (o[0]) {\n        case u.SUCCESS:\n          null === (n = (r = p.current).resolve) || void 0 === n || n.call(r, i), N(u.SUCCESS);\n          break;\n\n        default:\n          null === (t = (a = p.current).reject) || void 0 === t || t.call(a, i), N(u.ERROR);\n      }\n    }, f.onerror = function (e) {\n      var n, r;\n      null === (n = (r = p.current).reject) || void 0 === n || n.call(r, e), N(u.ERROR);\n    }, a && (E.current = window.setTimeout(function () {\n      C(), w(u.TIMEOUT_EXPIRED);\n    }, a)), f;\n  }, l = e.useRef(s = [n, t, C]), r(l.current, s) || (l.current = s), e.useCallback(a, l.current)),\n      U = e.useCallback(function () {\n    var e = [].slice.call(arguments),\n        n = t,\n        r = n.transferable,\n        a = void 0 === r ? c.transferable : r;\n    return new Promise(function (n, r) {\n      var t, o;\n      p.current = ((t = {}).resolve = n, t.reject = r, t);\n      var c = a === i.AUTO ? e.filter(function (e) {\n        return \"ArrayBuffer\" in window && e instanceof ArrayBuffer || \"MessagePort\" in window && e instanceof MessagePort || \"ImageBitmap\" in window && e instanceof ImageBitmap || \"OffscreenCanvas\" in window && e instanceof OffscreenCanvas;\n      }) : [];\n      null === (o = d.current) || void 0 === o || o.postMessage([[].concat(e)], c), w(u.RUNNING);\n    });\n  }, [w]),\n      b = e.useCallback(function () {\n    var e = null != t.autoTerminate ? t.autoTerminate : c.autoTerminate;\n    return R.current ? (console.error(\"[useWorker] You can only run one instance of the worker at a time, if you want to run more than one in parallel, create another instance with the hook useWorker(). Read more: https://github.com/alewin/useWorker\"), Promise.reject()) : (!e && d.current || (d.current = T()), U.apply(void 0, [].slice.call(arguments)));\n  }, [t.autoTerminate, T, U]),\n      O = {\n    status: m,\n    kill: C\n  };\n  return e.useEffect(function () {\n    return function () {\n      C();\n    };\n  }, [C]), [b, O];\n};\n\nexport { t as WORKER_STATUS, s as useWorker };","map":{"version":3,"sources":["C:/Users/xx/Desktop/Phytoflex/node_modules/expo-camera/node_modules/@koale/useworker/dist/index.mjs"],"names":["e","n","r","t","a","Promise","resolve","fn","apply","data","then","transferable","self","ArrayBuffer","MessagePort","ImageBitmap","OffscreenCanvas","postMessage","catch","o","i","createContext","u","length","map","toString","c","Blob","type","URL","createObjectURL","PENDING","SUCCESS","RUNNING","ERROR","TIMEOUT_EXPIRED","AUTO","NONE","timeout","remoteDependencies","autoTerminate","localDependencies","s","l","f","useState","m","v","d","useRef","R","p","E","w","useCallback","current","C","_url","terminate","revokeObjectURL","window","clearTimeout","N","T","Worker","onmessage","call","reject","onerror","setTimeout","U","slice","arguments","filter","concat","b","console","error","O","status","kill","useEffect","WORKER_STATUS","useWorker"],"mappings":"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","sourcesContent":["import e from\"react\";import n from\"isoworker\";import r from\"dequal\";var t,a=function(e){return function(n){return Promise.resolve(e.fn.apply(e,n.data[0])).then(function(n){var r,t=\"auto\"===e.transferable&&(r=n,\"ArrayBuffer\"in self&&r instanceof ArrayBuffer||\"MessagePort\"in self&&r instanceof MessagePort||\"ImageBitmap\"in self&&r instanceof ImageBitmap||\"OffscreenCanvas\"in self&&r instanceof OffscreenCanvas)?[n]:[];postMessage([\"SUCCESS\",n],t)}).catch(function(e){postMessage([\"ERROR\",e])})}},o=function(e,r,t,o){var i=n.createContext(o)[0],u=\"\\n    \"+function(e){return 0===e.length?\"\":\"importScripts('\"+e.map(function(e){return\"\"+e}).toString()+\"')\"}(r)+\";\\n    \"+i+\"\\n    onmessage=(\"+a+\")({\\n      fn: (\"+e+\"),\\n      transferable: '\"+t+\"'\\n    })\\n  \",c=new Blob([u],{type:\"text/javascript\"});return URL.createObjectURL(c)};!function(e){e.PENDING=\"PENDING\",e.SUCCESS=\"SUCCESS\",e.RUNNING=\"RUNNING\",e.ERROR=\"ERROR\",e.TIMEOUT_EXPIRED=\"TIMEOUT_EXPIRED\"}(t||(t={}));var i,u=t;!function(e){e.AUTO=\"auto\",e.NONE=\"none\"}(i||(i={}));var c={timeout:void 0,remoteDependencies:[],autoTerminate:!0,transferable:i.AUTO,localDependencies:function(){return[]}},s=function(n,t){void 0===t&&(t=c);var a,s,l,f=e.useState(u.PENDING),m=f[0],v=f[1],d=e.useRef(),R=e.useRef(!1),p=e.useRef({}),E=e.useRef(),w=e.useCallback(function(e){R.current=e===u.RUNNING,v(e)},[]),C=e.useCallback(function(){var e;(null===(e=d.current)||void 0===e?void 0:e._url)&&(d.current.terminate(),URL.revokeObjectURL(d.current._url),p.current={},d.current=void 0,window.clearTimeout(E.current))},[]),N=e.useCallback(function(e){(null!=t.autoTerminate?t.autoTerminate:c.autoTerminate)&&C(),w(e)},[t.autoTerminate,C,w]),T=(a=function(){var e=t.remoteDependencies,r=t.timeout,a=void 0===r?c.timeout:r,i=t.transferable,s=t.localDependencies,l=o(n,void 0===e?c.remoteDependencies:e,void 0===i?c.transferable:i,void 0===s?c.localDependencies:s),f=new Worker(l);return f._url=l,f.onmessage=function(e){var n,r,t,a,o=e.data,i=o[1];switch(o[0]){case u.SUCCESS:null===(n=(r=p.current).resolve)||void 0===n||n.call(r,i),N(u.SUCCESS);break;default:null===(t=(a=p.current).reject)||void 0===t||t.call(a,i),N(u.ERROR)}},f.onerror=function(e){var n,r;null===(n=(r=p.current).reject)||void 0===n||n.call(r,e),N(u.ERROR)},a&&(E.current=window.setTimeout(function(){C(),w(u.TIMEOUT_EXPIRED)},a)),f},l=e.useRef(s=[n,t,C]),r(l.current,s)||(l.current=s),e.useCallback(a,l.current)),U=e.useCallback(function(){var e=[].slice.call(arguments),n=t,r=n.transferable,a=void 0===r?c.transferable:r;return new Promise(function(n,r){var t,o;p.current=((t={}).resolve=n,t.reject=r,t);var c=a===i.AUTO?e.filter(function(e){return\"ArrayBuffer\"in window&&e instanceof ArrayBuffer||\"MessagePort\"in window&&e instanceof MessagePort||\"ImageBitmap\"in window&&e instanceof ImageBitmap||\"OffscreenCanvas\"in window&&e instanceof OffscreenCanvas}):[];null===(o=d.current)||void 0===o||o.postMessage([[].concat(e)],c),w(u.RUNNING)})},[w]),b=e.useCallback(function(){var e=null!=t.autoTerminate?t.autoTerminate:c.autoTerminate;return R.current?(console.error(\"[useWorker] You can only run one instance of the worker at a time, if you want to run more than one in parallel, create another instance with the hook useWorker(). Read more: https://github.com/alewin/useWorker\"),Promise.reject()):(!e&&d.current||(d.current=T()),U.apply(void 0,[].slice.call(arguments)))},[t.autoTerminate,T,U]),O={status:m,kill:C};return e.useEffect(function(){return function(){C()}},[C]),[b,O]};export{t as WORKER_STATUS,s as useWorker};\r\n//# sourceMappingURL=index.mjs.map\r\n"]},"metadata":{},"sourceType":"module"}